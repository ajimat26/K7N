<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Game Kotak Hadiah</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom right, #4facfe, #00f2fe);
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    h1 { margin-bottom: 10px; }
    button {
      background: #28a745;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      margin: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover { background: #218838; }
    select, input, textarea {
      width: 80%;
      padding: 10px;
      margin: 5px;
      border-radius: 6px;
      border: none;
      font-size: 16px;
    }
    #boxAnimation {
      width: 120px;
      height: 120px;
      margin: 20px auto;
      background-image: url('https://cdn-icons-png.flaticon.com/512/189/189689.png');
      background-size: contain;
      background-repeat: no-repeat;
    }
    @keyframes shake {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(10deg); }
      50% { transform: rotate(-10deg); }
      75% { transform: rotate(10deg); }
      100% { transform: rotate(0deg); }
    }
    .panel {
      display: none;
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 10px;
      margin-top: 10px;
      max-height: 400px;
      overflow-y: auto;
    }
    #notif {
      margin-top: 10px;
      font-weight: bold;
      min-height: 24px;
    }
    #maintenanceNotice {
      background: #ff4c4c;
      padding: 10px;
      border-radius: 6px;
      margin: 15px auto;
      max-width: 400px;
    }
  </style>
</head>
<body>

<h1>Game Kotak Hadiah</h1>

<div id="maintenanceNotice" style="display:none;"></div>

<div id="gamePanel">
  <div id="boxAnimation"></div>
  <button id="btnOpenBox">Buka Kotak</button>
  <div id="notif"></div>
  <h3>Poin: <span id="points">0</span></h3>

  <hr>

  <h3>Penarikan Poin</h3>
  <select id="amount">
    <option value="200">50.000 IC - 200 poin</option>
    <option value="400">100.000 IC - 400 poin</option>
    <option value="1000">250.000 IC - 1000 poin</option>
    <option value="2000">500.000 IC - 2000 poin</option>
    <option value="4000">1.000.000 IC - 4000 poin</option>
    <option value="8000">2.000.000 IC - 8000 poin</option>
  </select><br>
  <input type="text" id="nama" placeholder="Nama Lengkap"><br>
  <input type="text" id="rekening" placeholder="Nomor Rekening"><br>
  <button id="btnAjukanPenarikan">Ajukan Penarikan</button>

  <hr>

  <button id="btnLihatPesan">Lihat Pesan</button>
  <button id="btnRiwayatPenarikan">Riwayat Penarikan</button>
  <button id="btnAdminPanel">Admin Panel</button>
  <button onclick="window.open('https://wa.me/6283891019471','_blank')">Kasih Saran ke Developer</button>

  <div id="pesan" class="panel">
    <h3>Pesan</h3>
    <ul id="messageList"></ul>
    <button id="btnHapusPesan">Hapus Semua Pesan</button>
  </div>

  <div id="riwayat" class="panel">
    <h3>Riwayat Penarikan</h3>
    <ul id="riwayatList"></ul>
  </div>
</div>

<div id="adminLoginPanel" class="panel">
  <h3>Login Admin</h3>
  <input type="password" id="adminPass" placeholder="Password Admin"><br>
  <button id="btnLoginAdmin">Masuk</button>
  <button id="btnBatalLoginAdmin">Batal</button>
  <div id="adminLoginNotif"></div>
</div>

<div id="adminPanel" class="panel">
  <h3>Panel Admin</h3>
  <h4>Permintaan Penarikan</h4>
  <ul id="pendingWithdrawList"></ul>
  <hr>
  <h4>Mode Maintenance</h4>
  <textarea id="maintenanceReason" placeholder="Alasan..."></textarea><br>
  <input type="number" id="maintenanceDuration" placeholder="Durasi (menit)"><br>
  <button id="btnStartMaintenance">Mulai Maintenance</button>
  <button id="btnStopMaintenance">Hentikan Maintenance</button>
  <hr>
  <button id="btnLogoutAdmin">Logout Admin</button>
</div>

<audio autoplay loop>
  <source src="https://ia902905.us.archive.org/31/items/money-heist-free-fire/Money%20Heist%20x%20Free%20Fire.mp3" type="audio/mpeg">
</audio>

<script>
  // Inisialisasi
  const STORAGE_POINTS = "points";
  const STORAGE_MESSAGES = "messages";
  const STORAGE_WITHDRAWS = "withdraws";

  let points = parseInt(localStorage.getItem(STORAGE_POINTS)) || 0;
  let messages = JSON.parse(localStorage.getItem(STORAGE_MESSAGES)) || [];
  let withdraws = JSON.parse(localStorage.getItem(STORAGE_WITHDRAWS)) || [];
  let adminLoggedIn = false;
  const rewards = [
    {name: "Zonk", point: 0},
    {name: "+10 Poin", point: 10},
    {name: "+50 Poin", point: 50},
    {name: "+100 Poin", point: 100},
    {name: "2x Reward Berikutnya", point: -1}
  ];
  let doubleReward = false;

  function updatePoints() {
    document.getElementById("points").innerText = points;
    localStorage.setItem(STORAGE_POINTS, points);
  }

  function notif(msg) {
    document.getElementById("notif").innerText = msg;
  }

  function tampilPesan() {
    const ul = document.getElementById("messageList");
    ul.innerHTML = "";
    messages.forEach(m => {
      const li = document.createElement("li");
      li.textContent = m;
      ul.appendChild(li);
    });
  }

  function tampilRiwayat() {
    const ul = document.getElementById("riwayatList");
    ul.innerHTML = "";
    withdraws.forEach(w => {
      const li = document.createElement("li");
      li.textContent = `Nama: ${w.nama}, Rek: ${w.rekening}, Poin: ${w.amount}`;
      ul.appendChild(li);
    });
  }

  function tampilPendingWithdraws() {
    const ul = document.getElementById("pendingWithdrawList");
    ul.innerHTML = "";
    withdraws.forEach(w => {
      const li = document.createElement("li");
      li.textContent = `${w.nama} (${w.rekening}) - ${w.amount} poin`;
      ul.appendChild(li);
    });
  }

  document.getElementById("btnOpenBox").onclick = function() {
    document.getElementById("boxAnimation").style.animation = "shake 0.5s";
    setTimeout(() => {
      document.getElementById("boxAnimation").style.animation = "";
      const reward = rewards[Math.floor(Math.random() * rewards.length)];
      if (reward.point === -1) {
        doubleReward = true;
        notif("Kamu mendapatkan 2x reward berikutnya!");
      } else {
        let realReward = reward.point;
        if (doubleReward) {
          realReward *= 2;
          doubleReward = false;
        }
        points += realReward;
        updatePoints();
        notif(`Kamu mendapatkan: ${reward.name}`);
      }
    }, 500);
  };

  document.getElementById("btnAjukanPenarikan").onclick = function() {
    const nama = document.getElementById("nama").value;
    const rekening = document.getElementById("rekening").value;
    const amount = parseInt(document.getElementById("amount").value);

    if (!nama || !rekening) return notif("Isi semua data!");
    if (points < amount) return notif("Poin tidak cukup!");

    points -= amount;
    updatePoints();
    withdraws.push({ nama, rekening, amount });
    localStorage.setItem(STORAGE_WITHDRAWS, JSON.stringify(withdraws));
    notif("Permintaan penarikan dikirim.");
  };

  document.getElementById("btnLihatPesan").onclick = function() {
    tampilPesan();
    document.getElementById("pesan").style.display = "block";
    document.getElementById("riwayat").style.display = "none";
  };

  document.getElementById("btnRiwayatPenarikan").onclick = function() {
    tampilRiwayat();
    document.getElementById("riwayat").style.display = "block";
    document.getElementById("pesan").style.display = "none";
  };

  document.getElementById("btnHapusPesan").onclick = function() {
    if (confirm("Yakin hapus semua pesan?")) {
      messages = [];
      localStorage.setItem(STORAGE_MESSAGES, "[]");
      tampilPesan();
      notif("Semua pesan dihapus.");
    }
  };

  document.getElementById("btnAdminPanel").onclick = function() {
    document.getElementById("adminLoginPanel").style.display = "block";
  };

  document.getElementById("btnLoginAdmin").onclick = function() {
    const pass = document.getElementById("adminPass").value;
    if (pass === "admin123") {
      adminLoggedIn = true;
      document.getElementById("adminLoginPanel").style.display = "none";
      document.getElementById("adminPanel").style.display = "block";
      tampilPendingWithdraws();
    } else {
      document.getElementById("adminLoginNotif").innerText = "Password salah.";
    }
  };

  document.getElementById("btnBatalLoginAdmin").onclick = function() {
    document.getElementById("adminLoginPanel").style.display = "none";
  };

  document.getElementById("btnLogoutAdmin").onclick = function() {
    adminLoggedIn = false;
    document.getElementById("adminPanel").style.display = "none";
  };

  updatePoints();
</script>
</body>
    </html>
