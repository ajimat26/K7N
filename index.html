<!DOCTYPE html>
<html>
<head>
  <title>Forum UangDuty</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: url('logo.png') no-repeat center center fixed;
      background-size: cover;
      color: #000;
    }
    .menu {
      background: white;
      padding: 20px;
      margin: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px #aaa;
    }
    .forum-item {
      margin: 10px 0;
      padding: 10px;
      background: #f5f5f5;
      border-left: 5px solid #007bff;
    }
    .staff-indicator {
      position: fixed;
      top: 10px;
      left: 10px;
      padding: 5px 10px;
      background: red;
      color: white;
      border-radius: 5px;
      display: none;
    }
    button { margin-right: 10px; }
  </style>
</head>
<body>

<div class="staff-indicator" id="staffIndicator">MODE STAFF</div>

<div class="menu" id="menu">
  <h2>Forum UangDuty</h2>

  <div>
    <button onclick="createForum()">Buat Forum Baru</button>
    <button onclick="toggleStaff()">Akses Staff SAFD</button>
    <button onclick="resetMode()" id="resetBtn" style="display:none;">Mode Normal</button>
  </div>

  <div id="forumList"></div>
</div>

<script>
  let forums = JSON.parse(localStorage.getItem('forums') || '[]');
  let isStaff = false;
  let userId = prompt("Masukkan namamu (unik):");

  function createForum() {
    const name = prompt("Nama forum:");
    if (!name) return;
    const newForum = {
      name: name,
      owner: userId,
      logs: []
    };
    forums.push(newForum);
    saveForums();
    renderForums();
  }

  function saveForums() {
    localStorage.setItem('forums', JSON.stringify(forums));
  }

  function toggleStaff() {
    const pass = prompt("Masukkan password staff:");
    if (pass === "RFD") {
      isStaff = true;
      document.getElementById('staffIndicator').style.display = 'block';
      document.getElementById('resetBtn').style.display = 'inline';
      renderForums();
    } else {
      alert("Password salah!");
    }
  }

  function resetMode() {
    isStaff = false;
    document.getElementById('staffIndicator').style.display = 'none';
    document.getElementById('resetBtn').style.display = 'none';
    renderForums();
  }

  function renderForums() {
    const list = document.getElementById('forumList');
    list.innerHTML = '';

    forums.forEach((forum, index) => {
      if (forum.owner !== userId && !isStaff) return;

      const div = document.createElement('div');
      div.className = 'forum-item';
      div.innerHTML = `
        <b>${forum.name}</b><br>
        <button onclick="openForum(${index})">Buka Forum</button>
        ${isStaff ? `<button onclick="deleteForum(${index})">Hapus Forum</button>` : ''}
      `;
      list.appendChild(div);
    });
  }

  function deleteForum(index) {
    if (!isStaff) return;
    if (confirm("Yakin ingin menghapus forum ini?")) {
      forums.splice(index, 1);
      saveForums();
      renderForums();
    }
  }

  function openForum(index) {
    const forum = forums[index];
    alert(`Forum: ${forum.name}\nRiwayat: ${forum.logs.join(', ') || 'Kosong'}`);
    const action = prompt("Pilih aksi: TAMBAH, KURANGI, SETOR");
    if (!action) return;

    if (!isStaff) {
      let nominal = prompt("Masukkan jumlah:");
      if (!nominal || isNaN(nominal)) return;
      forum.logs.push(`${action.toUpperCase()} ${nominal}`);
      saveForums();
    } else {
      alert("Staff tidak bisa mengelola uang forum.");
    }
  }

  renderForums();
</script>

</body>
</html>
