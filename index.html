<!DOCTYPE html>
<html>
<head>
  <title>SAFD MONEY FORUM</title>
  <style>
    body {
      font-family: Arial;
      background-color: #f4f4f4;
      margin: 20px;
    }
    .panel {
      display: none;
      border: 1px solid #ccc;
      background: #fff;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 0 10px #ccc;
    }
    .panel.visible {
      display: block;
    }
    button {
      margin: 3px;
      padding: 7px 15px;
      cursor: pointer;
    }
    input {
      padding: 5px;
      margin: 5px;
    }
    #chatBox, #topTierList, #riwayatBox {
      border: 1px solid #999;
      background: #fafafa;
      padding: 8px;
      height: 120px;
      overflow-y: auto;
      margin-top: 5px;
    }
    .money {
      color: green;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>SAFD MONEY FORUM</h2>

  <!-- Tombol Navigasi -->
  <div>
    <button onclick="showPanel('akunPanel')">Buat Akun</button>
    <button onclick="showPanel('uangPanel')">Uang</button>
    <button onclick="showPanel('chatPanel')">Chat</button>
    <button onclick="showPanel('topPanel')">Top Tier</button>
    <button onclick="showPanel('adminPanel')">Admin</button>
  </div>

  <!-- Panel Akun -->
  <div id="akunPanel" class="panel">
    <h3>Buat Akun</h3>
    <input id="namaAkun" placeholder="Nama akun">
    <button onclick="buatAkun()">Simpan</button>
  </div>

  <!-- Panel Uang -->
  <div id="uangPanel" class="panel">
    <h3>Panel Uang</h3>
    <p>Total Uang: <span id="totalUang" class="money">Rp 0</span></p>
    <input id="jumlahUang" type="number" placeholder="Jumlah">
    <button onclick="tambahUang()">Tambah</button>
    <button onclick="ambilUang()">Ambil</button>
    <button onclick="setorUang()">Setor</button>
  </div>

  <!-- Panel Chat -->
  <div id="chatPanel" class="panel">
    <h3>Chat</h3>
    <div id="chatBox"></div>
    <input id="isiChat" placeholder="Tulis pesan">
    <button onclick="kirimChat()">Kirim</button>
  </div>

  <!-- Panel Top Tier -->
  <div id="topPanel" class="panel">
    <h3>Top Tier</h3>
    <div id="topTierList"></div>
  </div>

  <!-- Panel Admin -->
  <div id="adminPanel" class="panel">
    <h3>Login Admin</h3>
    <input id="adminPass" type="password" placeholder="Password">
    <button onclick="loginAdmin()">Masuk</button>
    <div id="adminContent" style="margin-top:10px;"></div>
  </div>

  <!-- Riwayat -->
  <div id="riwayatBox" class="panel visible">
    <h3>Riwayat Transaksi</h3>
    <div id="riwayatLog"></div>
  </div>

  <script>
    let akun = localStorage.getItem("akun") || null;
    let uang = parseInt(localStorage.getItem("uang")) || 0;
    let log = JSON.parse(localStorage.getItem("log")) || [];
    let isAdmin = false;

    function showPanel(id) {
      document.querySelectorAll(".panel").forEach(p => p.classList.remove("visible"));
      document.getElementById(id).classList.add("visible");
      updateTampilan();
    }

    function buatAkun() {
      const nama = document.getElementById("namaAkun").value.trim();
      if (!nama) return alert("Nama tidak boleh kosong");
      akun = nama;
      uang = 0;
      log = [];
      simpanData();
      alert("Akun dibuat: " + akun);
      updateTampilan();
    }

    function tambahUang() {
      const jumlah = parseInt(document.getElementById("jumlahUang").value);
      if (jumlah > 0) {
        uang += jumlah;
        catatLog(`+ Rp${jumlah}`);
        simpanData();
      }
    }

    function ambilUang() {
      const jumlah = parseInt(document.getElementById("jumlahUang").value);
      if (jumlah > 0 && uang >= jumlah) {
        uang -= jumlah;
        catatLog(`- Rp${jumlah}`);
        simpanData();
      }
    }

    function setorUang() {
      const jumlah = parseInt(document.getElementById("jumlahUang").value);
      if (jumlah > 0) {
        uang += jumlah;
        catatLog(`Setor Rp${jumlah}`);
        simpanData();
      }
    }

    function catatLog(teks) {
      log.unshift(teks);
      if (log.length > 5) log.pop();
      localStorage.setItem("log", JSON.stringify(log));
      updateRiwayat();
    }

    function updateRiwayat() {
      const box = document.getElementById("riwayatLog");
      box.innerHTML = log.map(r => `<p>${r}</p>`).join('');
    }

    function kirimChat() {
      const isi = document.getElementById("isiChat").value.trim();
      if (isi) {
        const nama = isAdmin ? `Admin ${akun}` : akun;
        document.getElementById("chatBox").innerHTML += `<p><b>${nama}:</b> ${isi}</p>`;
        document.getElementById("isiChat").value = '';
        document.getElementById("chatBox").scrollTop = document.getElementById("chatBox").scrollHeight;
      }
    }

    function loginAdmin() {
      const pass = document.getElementById("adminPass").value;
      if (pass === "RFD1") {
        isAdmin = true;
        document.getElementById("adminContent").innerHTML = `
          <p>Akun: ${akun || 'Belum ada'}</p>
          <p>Saldo: Rp ${uang}</p>
          <button onclick="hapusAkun()">Hapus Akun</button>`;
      } else {
        alert("Password salah!");
      }
    }

    function hapusAkun() {
      localStorage.clear();
      akun = null;
      uang = 0;
      log = [];
      location.reload();
    }

    function updateTampilan() {
      document.getElementById("totalUang").textContent = `Rp ${uang}`;
      updateTopTier();
      updateRiwayat();
    }

    function updateTopTier() {
      let html = `<p>1. ${akun || 'Tidak Ada'} - Rp ${uang}</p>`;
      document.getElementById("topTierList").innerHTML = html;
    }

    function simpanData() {
      localStorage.setItem("akun", akun);
      localStorage.setItem("uang", uang);
      updateTampilan();
    }

    updateTampilan();
  </script>
</body>
</html>
