<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Game Spin Wheel & Penukaran Poin</title>
<style>
  body {
    margin: 0; 
    overflow-x: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
    color: #fff;
    user-select: none;
  }

  #points {
    position: fixed;
    top: 15px;
    left: 20px;
    font-size: 22px;
    font-weight: 700;
    text-shadow: 0 0 6px rgba(0,0,0,0.5);
    z-index: 10;
  }

  #wheel-container {
    position: relative;
    width: 320px;
    height: 320px;
    margin: 80px auto 20px;
    user-select: none;
  }

  #wheel {
    width: 320px;
    height: 320px;
    border-radius: 50%;
    border: 10px solid #fff;
    box-shadow: 0 0 15px #fff;
    background: conic-gradient(
      #ff6f61 0deg 72deg,
      #ffd700 72deg 144deg,
      #4caf50 144deg 216deg,
      #2196f3 216deg 288deg,
      #9c27b0 288deg 360deg
    );
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
  }

  #pointer {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; 
    height: 0; 
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 40px solid #fff;
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
  }

  #spinBtn {
    display: block;
    margin: 20px auto;
    background: #ff6f61;
    border-radius: 50%;
    border: none;
    width: 110px;
    height: 110px;
    font-size: 24px;
    font-weight: 700;
    color: white;
    box-shadow: 0 0 25px #ff6f61;
    cursor: pointer;
    transition: transform 0.2s ease;
    outline: none;
  }
  #spinBtn:active {
    transform: scale(0.95);
  }

  #message {
    text-align: center;
    margin-top: 15px;
    font-weight: 600;
    font-size: 18px;
    min-height: 30px;
    user-select: none;
  }

  #exchange-section {
    max-width: 320px;
    margin: 30px auto;
    background: rgba(255 255 255 / 0.15);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 10px #00000050;
  }

  #exchange-section h2 {
    margin: 0 0 15px;
    text-align: center;
  }

  label, select, input, button {
    display: block;
    width: 100%;
    margin-bottom: 15px;
    font-size: 16px;
  }

  select, input {
    padding: 8px;
    border-radius: 8px;
    border: none;
    outline: none;
  }

  button {
    background: #4caf50;
    border: none;
    color: white;
    font-weight: 700;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 12px #4caf50;
    transition: background 0.3s ease;
  }
  button:hover:not(:disabled) {
    background: #43a047;
  }
  button:disabled {
    background: #9e9e9e;
    cursor: default;
    box-shadow: none;
  }

  /* Bubble background */
  .bubble {
    position: absolute;
    background: rgba(255,255,255,0.3);
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(255,255,255,0.6);
    animation-timing-function: linear;
    pointer-events: none;
    user-select: none;
  }
</style>
</head>
<body>

<div id="points">Poin: 0</div>

<div id="wheel-container">
  <div id="pointer"></div>
  <div id="wheel"></div>
</div>

<button id="spinBtn">PUTAR</button>
<div id="message"></div>

<div id="exchange-section">
  <h2>Tukar Poin Jadi Uang IC</h2>
  <label for="withdrawAmount">Pilih jumlah penarikan:</label>
  <select id="withdrawAmount">
    <option value="50000">50.000 IC - 500 Poin</option>
    <option value="100000">100.000 IC - 1000 Poin</option>
    <option value="250000">250.000 IC - 2500 Poin</option>
    <option value="500000">500.000 IC - 5000 Poin</option>
    <option value="1000000">1.000.000 IC - 10000 Poin</option>
  </select>

  <label for="fullname">Nama Lengkap:</label>
  <input type="text" id="fullname" placeholder="Masukkan nama lengkap" />

  <label for="rekening">Nomor Rekening:</label>
  <input type="text" id="rekening" placeholder="Masukkan nomor rekening" />

  <button id="submitWithdraw" disabled>Ajukan Penarikan</button>
  <div id="exchangeMessage" style="color:#ffc107; font-weight:600; text-align:center;"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // Firebase config - ganti dengan config Firebase kamu sendiri
  const firebaseConfig = {
    apiKey: "API_KEY",
    authDomain: "PROJECT_ID.firebaseapp.com",
    databaseURL: "https://PROJECT_ID.firebaseio.com",
    projectId: "PROJECT_ID",
    storageBucket: "PROJECT_ID.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Points
  let points = localStorage.getItem('points') ? parseInt(localStorage.getItem('points')) : 0;
  const pointsDisplay = document.getElementById('points');
  const spinBtn = document.getElementById('spinBtn');
  const wheel = document.getElementById('wheel');
  const message = document.getElementById('message');
  const withdrawAmount = document.getElementById('withdrawAmount');
  const fullname = document.getElementById('fullname');
  const rekening = document.getElementById('rekening');
  const submitWithdraw = document.getElementById('submitWithdraw');
  const exchangeMessage = document.getElementById('exchangeMessage');

  // Wheel segments mapping to rewards
  // 5 segments: Zonks, Small, Medium, Big, Double
  // Angles: each 72 degrees
  const rewards = [
    {type:'zonk', label:'Zonk', points:0, color:'#ff4444', start:0},
    {type:'small', label:'+10 Poin', points:10, color:'#4caf50', start:72},
    {type:'medium', label:'+25 Poin', points:25, color:'#2196f3', start:144},
    {type:'big', label:'+50 Poin', points:50, color:'#9c27b0', start:216},
    {type:'double', label:'2x Poin', points:0, color:'#ffd700', start:288},
  ];

  let doubleNext = false;
  let spinning = false;

  function updatePointsDisplay() {
    pointsDisplay.textContent = `Poin: ${points}`;
  }

  function getRewardByAngle(angle) {
    // angle normalized 0-360, returns reward of that segment
    angle = angle % 360;
    for (let i = 0; i < rewards.length; i++) {
      let start = rewards[i].start;
      let end = (start + 72) % 360;
      if
