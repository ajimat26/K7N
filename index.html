<!DOCTYPE html>
<html>
<head>
  <title>Forum UangDuty</title>
  <meta charset="UTF-8">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
  <h2>Buat Forum Baru</h2>
  <input id="namaForum" placeholder="Tulis nama forum">
  <button onclick="buatForum()">Buat</button>

  <h3>Daftar Forum Publik</h3>
  <div id="daftarForum"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA3-34rf9VZUIrAIR6z4BJtQm_MClqXm-Q",
      authDomain: "uangduty.firebaseapp.com",
      databaseURL: "https://uangduty-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "uangduty",
      storageBucket: "uangduty.firebasestorage.app",
      messagingSenderId: "598905752132",
      appId: "1:598905752132:web:9b764840e51c13a3044a11",
      measurementId: "G-YXZPEVYBDR"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function buatForum() {
      const nama = document.getElementById("namaForum").value;
      if (!nama) return alert("Nama forum tidak boleh kosong.");
      const id = "forum_" + Date.now();
      db.ref("forums/" + id).set({ id, nama }).then(() => {
        document.getElementById("namaForum").value = "";
        tampilForum();
      });
    }

    function tampilForum() {
      db.ref("forums").once("value", (snapshot) => {
        const data = snapshot.val() || {};
        const daftar = document.getElementById("daftarForum");
        daftar.innerHTML = "";
        Object.values(data).forEach(f => {
          const div = document.createElement("div");
          div.textContent = f.nama;
          daftar.appendChild(div);
        });
      });
    }

    tampilForum();
  </script>
</body>
</html>
