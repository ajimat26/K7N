<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UANGDUTY</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    header {
      background-color: #333;
      color: white;
      padding: 10px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
    .container {
      padding: 20px;
    }
    .hidden {
      display: none;
    }
    .admin-indicator {
      background: #28a745;
      color: white;
      padding: 6px;
      border-radius: 5px;
      font-size: 12px;
      margin-top: 5px;
      font-weight: bold;
    }
    #adminBtn {
      background-color: #28a745;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      padding: 5px 10px;
      margin-top: 10px;
    }
    #toggleAkunBtn {
      background-color: #ffc107;
      color: black;
      border: none;
      padding: 5px 10px;
      margin-top: 5px;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    UANGDUTY
    <div style="position: absolute; top: 10px; left: 10px;">
      <button id="adminBtn" onclick="toggleAdmin()">Mode Admin</button>
      <div id="adminIndicator" class="admin-indicator hidden">Mode Admin Aktif</div>
      <button id="toggleAkunBtn" class="hidden" onclick="toggleAkunBuat()">Nonaktifkan Buat Akun</button>
    </div>
  </header>  <div class="container">
    <div id="akunBox">
      <h3>Buat Akun</h3>
      <input type="text" id="namaPegawai" placeholder="Nama Pegawai">
      <button onclick="buatAkun()">Buat Akun</button>
    </div><div id="forumBox" class="hidden">
  <h3>Menu Pegawai</h3>
  <p>Halo, <span id="namaUser"></span>!</p>
  <p>Uang Anda: <span id="uangUser" style="color: green"></span>rb</p>
  <button onclick="tambahUang()">Tambah Uang</button>
  <button onclick="ambilUang()">Ambil Uang</button>
  <button onclick="setorUlang()">Reset Uang</button>
</div>

<div id="adminBox" class="hidden">
  <h3>Data Semua Pegawai</h3>
  <ul id="daftarPegawai"></ul>
</div>

  </div>  <script>
    let fullName = localStorage.getItem("fullName") || "";
    let izinBuat = localStorage.getItem("izinBuatAkun") !== "false";

    document.addEventListener("DOMContentLoaded", () => {
      updateAkunButtonText();
      updateBuatAkunVisibility();

      if (fullName === "ADMIN") {
        masukSebagaiAdmin();
      } else if (fullName) {
        document.getElementById("akunBox").classList.add("hidden");
        document.getElementById("forumBox").classList.remove("hidden");
        document.getElementById("namaUser").innerText = fullName;
        tampilkanUang();
      }
    });

    function buatAkun() {
      const nama = document.getElementById("namaPegawai").value.trim();
      if (!nama) return alert("Masukkan nama!");
      if (localStorage.getItem("fullName")) return alert("Akun sudah ada.");
      if (!izinBuat) return alert("Pendaftaran akun sedang ditutup oleh admin.");

      localStorage.setItem("fullName", nama);
      localStorage.setItem("uang_" + nama, "0");
      fullName = nama;
      document.getElementById("akunBox").classList.add("hidden");
      document.getElementById("forumBox").classList.remove("hidden");
      document.getElementById("namaUser").innerText = nama;
      tampilkanUang();
    }

    function tampilkanUang() {
      const uang = localStorage.getItem("uang_" + fullName) || "0";
      document.getElementById("uangUser").innerText = formatRupiah(uang);
    }

    function tambahUang() {
      let uang = parseInt(localStorage.getItem("uang_" + fullName) || "0");
      uang += 1000;
      localStorage.setItem("uang_" + fullName, uang);
      tampilkanUang();
    }

    function ambilUang() {
      let uang = parseInt(localStorage.getItem("uang_" + fullName) || "0");
      uang = Math.max(0, uang - 1000);
      localStorage.setItem("uang_" + fullName, uang);
      tampilkanUang();
    }

    function setorUlang() {
      localStorage.setItem("uang_" + fullName, "0");
      tampilkanUang();
    }

    function toggleAdmin() {
      const isAdmin = fullName === "ADMIN";
      if (isAdmin) {
        localStorage.removeItem("fullName");
        fullName = "";
        document.getElementById("adminIndicator").classList.add("hidden");
        document.getElementById("toggleAkunBtn").classList.add("hidden");
        document.getElementById("adminBtn").innerText = "Mode Admin";
        document.getElementById("adminBox").classList.add("hidden");
        document.getElementById("akunBox").classList.remove("hidden");
      } else {
        const pass = prompt("Masukkan password admin:");
        if (pass === "RFD") {
          localStorage.setItem("fullName", "ADMIN");
          fullName = "ADMIN";
          masukSebagaiAdmin();
        } else {
          alert("Password salah.");
        }
      }
    }

    function masukSebagaiAdmin() {
      document.getElementById("adminIndicator").classList.remove("hidden");
      document.getElementById("toggleAkunBtn").classList.remove("hidden");
      document.getElementById("adminBtn").innerText = "Keluar Admin";
      document.getElementById("akunBox").classList.add("hidden");
      document.getElementById("forumBox").classList.add("hidden");
      document.getElementById("adminBox").classList.remove("hidden");
      tampilkanSemuaData();
    }

    function tampilkanSemuaData() {
      const ul = document.getElementById("daftarPegawai");
      ul.innerHTML = "";
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith("uang_") && key !== "uang_ADMIN") {
          const nama = key.replace("uang_", "");
          const uang = localStorage.getItem(key);
          const li = document.createElement("li");
          li.textContent = `${nama} - Rp ${formatRupiah(uang)}rb`;
          ul.appendChild(li);
        }
      }
    }

    function toggleAkunBuat() {
      izinBuat = !izinBuat;
      localStorage.setItem("izinBuatAkun", izinBuat);
      updateAkunButtonText();
      updateBuatAkunVisibility();
    }

    function updateAkunButtonText() {
      document.getElementById("toggleAkunBtn").innerText = izinBuat ? "Nonaktifkan Buat Akun" : "Aktifkan Buat Akun";
    }

    function updateBuatAkunVisibility() {
      document.getElementById("akunBox").style.display = izinBuat ? "block" : "none";
    }

    function formatRupiah(angka) {
      return parseInt(angka).toLocaleString("id-ID");
    }
  </script></body>
</html>
